<html lang="en">
    {{>head}}
    <body>
        {{>topnavigation}}
        <main class="userguide-page">
            <h1>User guide</h1>
            <p>R7RS index search consists of control pane on the left, and result list in the center. 
            <h2>Control pane</h2>
            <p>In the control pane, optionally select values from the filter list, optionally enter search query in the text field, and press either enter or button with magnifying glass to display the results. If you have javascript enabled, typing in the search query field should give you auto suggestions for identifier names, although those suggestions are not filtered by current selection. If you have javascript enabled and have checked apropriate option in settings, you can use control + f to quickly focus to the query text field.
            <h2>Result list</h2>
            <p>Each result item can be either a procedure, a macro, or a value. At the top it shows a library it is exported from. Note, that some identifiers are exported from multiple libraries. The library name can be pressed, which will result in starting new search using said library as a filter. On the right side top, associated list of tags with the result is shown. Like with library, tags are also clickable, and start a search using the clicked tag as a filter.
            <p>Procedure, procedure-like macros and value names are rendered in <span class="bright-name">red</span>. Procedures are distinguished by being surrounded with parenthesis, as if being called. Following the name until the "=&gt;" sign are parameters. If parameter is just a name, it means it has an unspecified type. Otherwise, parameter may be a list of type and name. Types are represented as predicate procedures. After the "=&gt;" sign is the return type. The return can be one of: predicate procedure name (just like parameter type); a "*" symbol (meaning it returns a value of unknown type); a word "undefined" (meaning it returns a value which shouldn't be used in portable code); a list with "values" word in car position (meaning it has a multivalue return); a list with "or" word in car position (meaning the return type is a union between given types). Types expressed as predicates in <span class="bright-type">blue</span> are links. Pressing on a type in parameter position will search using that type as <b>return value</b> filter; pressing on a type in return value position will search using that type as <b>parameter</b> filter.
            <p>Scheme is a functional language and thus it'd be useful to specify taken / returned procedure values. Therefore, if one of parameters is <span class="bright-type">procedure?</span>, it's signature is defined below the main procedure's signature, using parameter's name in car position. Likewise same is done if return value is a procedure; but in that case word "return" is used as a name.
            <p>Procedures can have more than one entry, even from same library. This occurs, if the procedures is has optional parameters and therefore can be called in multiple ways; or if the result type can be determined more precisely under more specific input parameters.
            <p>Structural macros that don't resemble functions are rendered in <span class="bright-syntax">green</span>. If macro is complex, some parts of it are grouped, and the syntax of those groups shown below the syntax of whole macro. Macro literals are also rendered in green. To make parenthesis more obvious, auxiliary parenthesis coloring is used, however this coloring doesn't signify any information.
            <h2>Tags</h2>
            Result items might have one or more of following tags
            <ul>
                <li>pure - this procedure is referentially transparent (as long as whatever procedure parameters it has are also referentially transparent). Procedures that return undefined value cannot be marked as pure;</li>
                <li>predicate - this procedure that takes any object and returns a boolean. Such procedure may be used as a type;</li>
                <li>parameterized - the behavior of the procedure depends on a dynamic parameter (ie, uses procedure created with "make-parameter");</li>
                <li>parameter - this procedure was created with "make-parameter" and may be used in parameterize form;</li>
                <li>syntax - this is actually a macro, although presented as a procedure (the justification is that combining ad-hoc type annotation with syntax specification might be confusing. Simple macros were subjectively chosen to be shown as if they were procedures if they superficially appear and are called as such. This might be changed in the future);</li>
                <li>deprecated - not recommended to be used, exists only for backwards compatibility with older SRFIs.</li>
            </ul>
            <h2>Filtering logic</h2>
            <p>Selecting multiple libraries, will return results that are part of <b>any</b> of the given libraries.</p>
            <p>Selecting multiple tags, will return results that contain <b>all</b> of the given tags.</p>
            <p>Selecting multiple parameter types will return results that match <b>all</b> of the given types. Note, that some types contain logical "parent" / more general types, eg. <span class="bright-type">pair?</span> is a parent of <span class="bright-type">list?</span>. When searching by parameter type, the procedures that take parent type will be matched. However, the results with more precise "child" type are weight more heavily and should appear at the start of the search.</p>
            <p>Selecting multiple return types will return results that match <b>all</b> of the given types. As and in case filter by parameter type, when filtering by return type the type hierarchy is taken into consideration. Searching by a "parent" return type will also yield procedures returning more precise "child" types.
            <p>The text query is parsed by edismax parser, and is used to filter by name and parameter / subsyntax names. This means it supports and interprets common searching syntax, such as using "-" in front of the word to exclude results containing said word. This has its disadvantages; eg. if you tried to search for coercion functions and typed "-&gt;string" (without quotes) into the search input field, you wouldn't find anything interesting, because the leading minus was interpreted specially. Instead, you'd have to search using "exact phrase", by putting double quotes around the search.
        </main>
    </body>
</html>
